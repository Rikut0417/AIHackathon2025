<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Me-Too!ï¼ˆãƒŸãƒ¼ãƒˆã‚¥ãƒ¼ï¼‰ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
            margin-top: 40px;
        }
        .diagram-container {
            margin: 30px 0;
            text-align: center;
        }
        .tech-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .tech-card {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .tech-card h3 {
            margin-top: 0;
            color: #333;
        }
        .tech-card ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .tech-card li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Me-Too!ï¼ˆãƒŸãƒ¼ãƒˆã‚¥ãƒ¼ï¼‰ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h1>
        
        <h2>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ</h2>
        <div class="diagram-container">
            <div class="mermaid">
                graph TD
                    subgraph "ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"
                        A[Flutter App<br/>ğŸ“± Dart]
                        A --> |ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼| B[Firebase Auth]
                        A --> |ğŸ” ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ¤œç´¢| C[Flask API Server]
                        A --> |âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°| D[Firestore DB]
                    end

                    subgraph "âš™ï¸ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰"
                        C[Flask API Server<br/>ğŸ Python] --> |ğŸ“Š æ¤œç´¢ã‚¯ã‚¨ãƒª| D[Firestore DB]
                        C --> |ğŸŒ CORSå¯¾å¿œ| A
                        C --> |ğŸ’š ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯| E[Monitoring]
                    end

                    subgraph "ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"
                        D[Firestore DB] --> |ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«| F[profiles collection]
                        F --> |ğŸ·ï¸ æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹| G[hobby_keywords]
                        F --> |ğŸ“ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°| H[birthplace]
                    end

                    subgraph "ğŸ”’ èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"
                        B[Firebase Auth] --> |ğŸ« èªè¨¼æƒ…å ±| I[Google Cloud IAM]
                        I --> |ğŸ”‘ ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ| C
                    end

                    subgraph "â˜ï¸ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ"
                        J[Google Cloud Platform]
                        J --> |ğŸš€ ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°| C
                        J --> |ğŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸| D
                        J --> |ğŸ” èªè¨¼| B
                    end

                    subgraph "ğŸ’» é–‹ç™ºç’°å¢ƒ"
                        K[Local Development]
                        K --> |ğŸŒ Flutter Web| A
                        K --> |ğŸ”§ Flask Dev Server| C
                        K --> |âš™ï¸ ç’°å¢ƒå¤‰æ•°| L[.env]
                    end

                    style A fill:#4CAF50,stroke:#333,stroke-width:2px,color:#fff
                    style C fill:#2196F3,stroke:#333,stroke-width:2px,color:#fff
                    style D fill:#FF9800,stroke:#333,stroke-width:2px,color:#fff
                    style B fill:#F44336,stroke:#333,stroke-width:2px,color:#fff
                    style J fill:#9C27B0,stroke:#333,stroke-width:2px,color:#fff
            </div>
        </div>

        <h2>ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h2>
        <div class="diagram-container">
            <div class="mermaid">
                sequenceDiagram
                    participant U as ğŸ‘¤ User
                    participant F as ğŸ“± Flutter App
                    participant A as ğŸ” Firebase Auth
                    participant B as ğŸ Flask Backend
                    participant D as ğŸ—„ï¸ Firestore DB

                    U->>F: ã‚¢ãƒ—ãƒªèµ·å‹•
                    F->>A: èªè¨¼ç¢ºèª
                    A-->>F: èªè¨¼çŠ¶æ…‹è¿”å´
                    
                    U->>F: æ¤œç´¢å®Ÿè¡Œ (è¶£å‘³ãƒ»å‡ºèº«åœ°)
                    F->>B: POST /search
                    B->>D: ã‚¯ã‚¨ãƒªå®Ÿè¡Œ (hobby_keywords, birthplace)
                    D-->>B: æ¤œç´¢çµæœ
                    B-->>F: JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹
                    F-->>U: çµæœè¡¨ç¤º
            </div>
        </div>

        <h2>ğŸ› ï¸ æŠ€è¡“ä»•æ§˜è©³ç´°</h2>
        <div class="tech-specs">
            <div class="tech-card">
                <h3>ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</h3>
                <ul>
                    <li><strong>æŠ€è¡“:</strong> Flutter (Dart)</li>
                    <li><strong>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ :</strong> Web, iOS, Android</li>
                    <li><strong>èªè¨¼:</strong> Firebase Auth</li>
                    <li><strong>ä¸»è¦ç”»é¢:</strong> ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã€ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒ›ãƒ¼ãƒ ã€æ¤œç´¢çµæœ</li>
                    <li><strong>ã‚µãƒ¼ãƒ“ã‚¹:</strong> AuthService, FirebaseSearchService</li>
                </ul>
            </div>

            <div class="tech-card">
                <h3>âš™ï¸ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</h3>
                <ul>
                    <li><strong>æŠ€è¡“:</strong> Flask (Python)</li>
                    <li><strong>API:</strong> RESTful API</li>
                    <li><strong>CORS:</strong> æœ‰åŠ¹åŒ–æ¸ˆã¿</li>
                    <li><strong>ãƒãƒ¼ãƒˆ:</strong> 5000</li>
                    <li><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:</strong> /search, /health</li>
                </ul>
            </div>

            <div class="tech-card">
                <h3>ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</h3>
                <ul>
                    <li><strong>æŠ€è¡“:</strong> Firestore</li>
                    <li><strong>ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³:</strong> profiles</li>
                    <li><strong>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:</strong> hobby_keywords (é…åˆ—)</li>
                    <li><strong>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:</strong> name, hobby, birthplace, department</li>
                </ul>
            </div>

            <div class="tech-card">
                <h3>ğŸ” æ¤œç´¢æ©Ÿèƒ½</h3>
                <ul>
                    <li><strong>è¶£å‘³æ¤œç´¢:</strong> array_contains ã‚¯ã‚¨ãƒª</li>
                    <li><strong>å‡ºèº«åœ°æ¤œç´¢:</strong> å®Œå…¨ä¸€è‡´ã‚¯ã‚¨ãƒª</li>
                    <li><strong>è¤‡åˆæ¤œç´¢:</strong> ANDæ¡ä»¶å¯¾å¿œ</li>
                    <li><strong>çµæœå½¢å¼:</strong> JSON (success, users, count)</li>
                </ul>
            </div>
        </div>

        <h2>ğŸš€ é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼</h2>
        <div class="diagram-container">
            <div class="mermaid">
                graph LR
                    A[ğŸ’» Local Development] --> B[ğŸ§ª Testing]
                    B --> C[ğŸ”¨ Build]
                    C --> D[â˜ï¸ GCP Deploy]
                    D --> E[ğŸŒ Production]
                    
                    F[ğŸ“ Code Changes] --> A
                    G[ğŸ”§ Configuration] --> A
                    
                    style A fill:#4CAF50,stroke:#333,stroke-width:2px,color:#fff
                    style E fill:#FF5722,stroke:#333,stroke-width:2px,color:#fff
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            sequence: {
                useMaxWidth: true,
                showSequenceNumbers: true
            }
        });
    </script>
</body>
</html>